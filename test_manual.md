# 🧪 画布事件驱动机制手动测试指南

## 📋 测试前准备

1. **启动应用**
   ```bash
   python3 app.py
   ```

2. **打开浏览器**
   - 访问 `http://localhost:8050`
   - 打开开发者工具（F12）→ Console标签页

## 🎯 测试场景

### 测试1：基础画布加载
- **操作**: 刷新页面
- **预期**: 画布正常显示，没有JavaScript错误
- **验证**: 控制台没有错误信息

### 测试2：节点移动（核心功能）
- **操作**: 点击节点的移动按钮（上、下、左、右）
- **预期**: 
  - 节点位置正确变化
  - 画布立即更新
  - 消息显示操作结果
- **验证**: 
  - 节点视觉位置改变
  - 无JavaScript错误
  - 响应速度正常

### 测试3：事件队列机制
- **操作**: 快速连续点击多个移动按钮
- **预期**: 
  - 所有操作都能正确处理
  - 不会出现重复更新
  - 画布状态保持一致
- **验证**: 控制台检查是否有事件相关的log

### 测试4：错误处理
- **操作**: 尝试将节点移动到边界外
- **预期**: 
  - 显示适当的错误消息
  - 画布状态不变
  - 系统保持稳定

## 📊 性能对比

### 修改前（预期表现）
- 每次节点操作：全量重新渲染
- 响应时间：较慢
- 多次操作：可能出现闪烁

### 修改后（当前实现）
- 每次节点操作：事件触发→统一更新
- 响应时间：应该相同或更快
- 多次操作：更平滑

## 🔧 调试信息

### 控制台日志
查看以下信息：
- 事件创建日志
- 画布更新日志
- 错误或警告信息

### 网络请求
检查：
- 请求数量是否合理
- 响应时间是否正常

## ✅ 测试通过标准

1. **功能完整性**: 所有原有功能正常工作
2. **性能稳定**: 没有明显的性能退化
3. **错误处理**: 异常情况下系统稳定
4. **用户体验**: 操作流畅，反馈及时

## 🚨 常见问题

### 如果遇到问题：
1. **页面无法加载**: 检查Python错误信息
2. **JavaScript错误**: 查看浏览器控制台
3. **功能异常**: 检查callback是否正确注册
4. **性能问题**: 观察网络请求和渲染时间

## 📝 测试报告模板

```
测试时间: ___________
测试人员: ___________

基础功能测试:
- 页面加载: [✅/❌]
- 节点移动: [✅/❌]
- 错误处理: [✅/❌]

性能测试:
- 响应速度: [正常/缓慢]
- 多次操作: [流畅/卡顿]
- 内存使用: [正常/异常]

问题记录:
- 问题1: ___________
- 问题2: ___________

整体评价: [通过/需要修复]
```

---

**下一步**: 根据测试结果，继续优化或修复发现的问题。