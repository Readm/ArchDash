# Monaco Editor 增强功能指南

## 🎉 新功能：专业代码编辑器

现在您的图形可视化工具集成了Monaco Editor（VS Code的编辑器核心），提供专业级的代码编辑体验！

## ✨ 核心功能

### 🎨 Python语法高亮
- **关键字高亮**：`def`, `return`, `import` 等Python关键字
- **字符串高亮**：字符串和注释的特殊颜色
- **数字高亮**：数值的专门显示
- **运算符高亮**：`=`, `+`, `*` 等运算符

### 🔍 代码补全与提示
- **智能补全**：输入时自动提示可能的完成
- **参数提示**：函数调用时显示参数信息
- **Graph API专用**：针对您的Graph API的特殊补全

### 📏 编辑器特性
- **行号显示**：清晰的行号标识
- **代码折叠**：可折叠函数和代码块
- **自动缩进**：智能的Python缩进处理
- **括号匹配**：自动匹配和高亮括号
- **深色主题**：护眼的深色编辑界面

## 🎮 使用方法

### 基础编辑
1. **直接输入**：在编辑器中直接编写Python代码
2. **语法检查**：实时显示语法错误（如果有）
3. **自动保存**：代码变更自动同步到应用

### 智能补全
1. **触发补全**：输入 `g.` 或 `g["` 时自动显示建议
2. **选择建议**：使用↑↓键选择，Enter确认
3. **专用模板**：针对Graph API的代码模板

### 专用代码片段

#### 1. 参数访问
输入 `g[` → 自动补全为 `g["param_name"]`

#### 2. 参数设置
输入 `g["param"] = ` → 模板：`g["param_name"] = value`

#### 3. 计算函数
输入 `add_computed` → 模板：
```python
g.add_computed("param_name", function_name, "description")
```

#### 4. 函数定义
输入 `def calc` → 模板：
```python
def calculation_name():
    """Description"""
    return g["param1"] + g["param2"]
```

## 🔧 高级功能

### 📍 精确跳转
- **上下文菜单跳转**：点击节点 → 弹出菜单 → "🔍 Jump to Code"
- **自动定位**：光标精确跳转到参数定义行
- **居中显示**：目标行自动居中显示

### ⌨️ 快捷键支持
- **Ctrl+Z**: 撤销
- **Ctrl+Y**: 重做  
- **Ctrl+F**: 查找
- **Ctrl+H**: 替换
- **Ctrl+/**: 注释/取消注释
- **Alt+↑/↓**: 移动行
- **Shift+Alt+↑/↓**: 复制行

### 🎯 自动功能
- **自动缩进**：Python代码的智能缩进
- **自动括号**：输入 `(` 自动添加 `)`
- **自动引号**：输入 `"` 自动添加配对引号
- **智能换行**：在合适位置自动换行

## 💡 使用技巧

### 快速编写Graph代码
1. **开始新图**：
   ```python
   from core import Graph
   g = Graph("My Graph")  # 自动补全
   ```

2. **添加参数**：
   ```python
   g["voltage"] = 12.0    # 使用补全模板
   g["current"] = 2.0
   ```

3. **创建函数**：
   ```python
   def power_calc():      # 使用函数模板
       return g["voltage"] * g["current"]
   ```

4. **添加计算参数**：
   ```python
   g.add_computed("power", power_calc, "Power calculation")
   ```

### 高效编辑
1. **多光标编辑**：Ctrl+Click 添加多个光标
2. **选择相同词**：Ctrl+D 选择下一个相同单词
3. **块选择**：Shift+Alt+拖拽 进行块选择
4. **快速注释**：Ctrl+/ 快速添加/移除注释

### 错误检查
1. **红色波浪线**：语法错误提示
2. **悬停查看**：鼠标悬停查看错误详情
3. **实时反馈**：输入时即时显示问题

## 🔄 与应用的集成

### 自动同步
- **实时更新**：代码修改后图形自动刷新
- **双向同步**：编辑器 ↔ 应用数据保持同步
- **状态保存**：应用重启后保持代码内容

### 交互功能
- **节点跳转**：从图形直接跳转到代码位置
- **参数定位**：精确定位参数定义
- **依赖跟踪**：显示参数间的依赖关系

### 按钮操作
- **Load Sample**：加载示例代码到Monaco Editor
- **Clear Code**：清空编辑器内容
- **Refresh Graph**：手动触发图形更新

## 🎯 对比提升

### 相比简单文本框：
- ✅ **语法高亮** vs 纯文本
- ✅ **智能补全** vs 手动输入
- ✅ **错误提示** vs 运行时错误
- ✅ **专业界面** vs 基础文本框
- ✅ **快捷键支持** vs 有限操作
- ✅ **代码折叠** vs 平面显示

### 开发体验提升：
- 🚀 **编写速度**：自动补全大幅提升输入速度
- 🎯 **准确性**：语法高亮减少错误
- 🔍 **可读性**：专业排版和颜色区分
- ⚡ **效率**：快捷键和智能功能
- 💫 **专业感**：VS Code级别的编辑体验

## 🌟 总结

现在您拥有了一个**专业级的图形可视化开发环境**：

✅ **Monaco Editor**: VS Code同款编辑器  
✅ **Python高亮**: 完整语法着色支持  
✅ **智能补全**: Graph API专用代码提示  
✅ **精确跳转**: 从图形节点直接跳转代码  
✅ **实时同步**: 编辑器与图形的无缝集成  

访问 **http://127.0.0.1:8051** 立即体验专业级的代码编辑和可视化功能！